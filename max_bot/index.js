import { Bot } from '@maxhub/max-bot-api';
import dotenv from 'dotenv';

dotenv.config();

const bot = new Bot(process.env.BOT_TOKEN);


bot.api.setMyCommands([
  { name: 'start', description: '–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ GrowGood' },
  { name: 'help', description: '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏' },
]);


bot.command('start', (ctx) => {
const sender = ctx.message?.sender;
  const userName = sender?.first_name || '–ü–æ–º–æ—â–Ω–∏–∫';

  return ctx.reply(
    `–ü—Ä–∏–≤–µ—Ç, ${userName}! üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –í—ã—Ä–∞—Å—Ç–∏ –î–æ–±—Ä–æ ‚Äî –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –≥–¥–µ —Ç—ã –≤—ã–ø–æ–ª–Ω—è–µ—à—å –¥–æ–±—Ä—ã–µ –¥–µ–ª–∞ –∏ –≤—ã—Ä–∞—â–∏–≤–∞–µ—à—å —Å–≤–æ—ë –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –¥–µ—Ä–µ–≤–æ. –ê –¥–µ—Ä–µ–≤—å—è –∫–∞–∫ –∏–∑–≤–µ—Å—Ç–Ω–æ –ø—Ä–∏–Ω–æ—Å—è—Ç –ø–ª–æ–¥—ã. –í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ –æ–Ω–∏ –º–æ–≥—É—Ç –±—ã—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ: –æ—Ç —Å–∫–∏–¥–æ–∫ –æ—Ç –Ω–∞—à–∏—Ö –ø–æ—Ä—Ç–Ω—ë—Ä–æ–≤ –¥–æ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–µ–Ω–µ–≥ –¥–ª—è –±–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö —Ñ–æ–Ω–¥–æ–≤`,
    {
      buttons: [
        {
          type: 'web_app',
          text: '–ù–∞—á–∞—Ç—å –¥–µ–ª–∞—Ç—å –¥–æ–±—Ä—ã–µ –¥–µ–ª–∞',
          url: process.env.MINI_APP_URL
        }
      ]
    }
  );
});


bot.command('help', (ctx) => {
  return ctx.reply(
    '–ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è GrowGood:\n' +
    '1. –û—Ç–∫—Ä–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ\n' +
    '2. –í—ã–±–µ—Ä–∏ –º–∏—Å—Å–∏—é –Ω–∞ –∫–∞—Ä—Ç–µ –∏–ª–∏ –≤ —Å–ø–∏—Å–∫–µ\n' +
    '3. –í—ã–ø–æ–ª–Ω–∏ –µ—ë ‚Üí –ø–æ–ª—É—á–∏ –∫–∞–ø–ª–∏ –≤–æ–¥—ã ‚Üí –∏–≥—Ä–∞–π –∏ –≤—ã—Ä–∞—â–∏–≤–∞–π –¥–µ—Ä–µ–≤–æ\n' +
    '4. –í –ø—Ä–æ—Ñ–∏–ª–µ —Å–º–æ—Ç—Ä–∏—Ç–µ —Å–≤–æ–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è!'
  );
});


bot.start();
console.log('–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω');
